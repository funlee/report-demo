(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b0d1d8a0","chunk-4e1e1efa","chunk-23341f70","chunk-3d9f9d79","chunk-2d224d6b","chunk-2d0b5f98"],{"1ad6":function(e,t,a){"use strict";a.r(t);var n=a("ab5b"),r=a("6022");t.default=function(e){var t=Object(n.useState)(e),a=t[0],l=t[1];return[a,function(e,t){return r.c.getPage(e,t).then((function(e){var t=JSON.parse(e.layout_json).layers,a=t.layersAttr,n=void 0===a?[]:a,r=t.layersDataInfo,i=void 0===r?[]:r,o=n.map((function(e){var t=e._title_,a=void 0===t?"":t,n=e.title,r=void 0===n?{}:n,l=e.id,o=void 0===l?"":l,c=e.type,d=void 0===c?"":c,u=i.find((function(e){return e.id===o}));return{_title_:a,title:r,id:o,type:d,dataInfo:u}}));l(o)}))}]}},"4afd":function(e,t,a){"use strict";a.r(t);var n=a("ab5b"),r=a.n(n),l=a("72c7"),i=a("538fa"),o=a.n(i);t.default=function(e){var t=e.title,a=e.data,i=e.placement,c=void 0===i?"bottom":i,d=e.initValue,u=void 0===d?"":d,s=e.onSelectChange,m=Object(n.useState)(""),f=m[0],v=m[1],p=function(e){return function(){v(e),s(e)}};return Object(n.useEffect)((function(){v(u)}),[u]),r.a.createElement("div",{className:o.a.displayList},r.a.createElement("div",{className:o.a.displayListTitle},t),r.a.createElement("div",{className:o.a.displayListContent},r.a.createElement("ul",null,a.map((function(e){var t=e.name,a=e.value;return r.a.createElement(l.a,{arrow:!0,key:a,title:t,placement:c},r.a.createElement("li",{className:f===a?o.a.active:"",onClick:p(a)},t))})))))}},"538fa":function(e,t,a){e.exports={displayList:"style-module_displayList_3ln6A",displayListTitle:"style-module_displayListTitle_27uC3",displayListContent:"style-module_displayListContent__F-rm",active:"style-module_active_2z2T4"}},"81c1":function(e,t,a){"use strict";a.r(t);var n=a("47f4");a.d(t,"RadioRow",(function(){return n.default}));var r=a("4afd");a.d(t,"DisplayList",(function(){return r.default}))},9987:function(e,t,a){"use strict";var n=a("4ea4"),r=a("dbce");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("ab5b")),i=(0,n(a("f3f8")).default)(l.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");t.default=i},af48:function(e,t,a){"use strict";var n=a("4ea4"),r=a("dbce");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("ab5b")),i=(0,n(a("f3f8")).default)(l.createElement("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),"HelpOutline");t.default=i},b686:function(e,t,a){"use strict";a.r(t);var n=a("1ad6");a.d(t,"useLayerList",(function(){return n.default}))},c1bd:function(e,t,a){"use strict";var n=a("c31d"),r=a("15fd"),l=a("ab5b"),i=(a("d7bc"),a("8ae8")),o=a("1f64"),c=a("c9ef"),d=l.forwardRef((function(e,t){var a=e.absolute,o=void 0!==a&&a,c=e.classes,d=e.className,u=e.component,s=void 0===u?"hr":u,m=e.flexItem,f=void 0!==m&&m,v=e.light,p=void 0!==v&&v,b=e.orientation,g=void 0===b?"horizontal":b,h=e.role,y=void 0===h?"hr"!==s?"separator":void 0:h,w=e.variant,E=void 0===w?"fullWidth":w,D=Object(r.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return l.createElement(s,Object(n.a)({className:Object(i.a)(c.root,d,"fullWidth"!==E&&c[E],o&&c.absolute,f&&c.flexItem,p&&c.light,"vertical"===g&&c.vertical),role:y,ref:t},D))}));t.a=Object(o.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(c.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(d)},c982:function(e,t,a){"use strict";a.r(t);var n=a("ab5b"),r=a.n(n),l=a("8776"),i=a("980a"),o=a.n(i),c=a("72c7"),d=a("af48"),u=a.n(d),s=a("c1bd"),m=a("b516"),f=a("81c1"),v=a("b686"),p=a("47f5"),b=a("0038"),g=a("7155"),h=a("8e30"),y=a("d622"),w=a.n(y),E=a("9987"),D=a.n(E),O=a("677b"),S=a("d807"),_=a.n(S),j=a("2ef0");function C(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var k=Object(p.a)((function(){return{formControl:{minWidth:145,marginRight:"10px"}}})),I=function(e){var t=e.selectedLayer,a=e.layersDataInfo,i=e.pageList,d=e.BERoot,p=k(),y=Object(n.useState)("currentReport"),E=y[0],S=y[1],R=Object(n.useState)("chart"),I=R[0],L=R[1],N=Object(n.useState)(""),A=N[0],x=N[1],T=Object(n.useState)(""),P=T[0],z=T[1],B=Object(n.useState)(""),M=B[0],F=B[1],V=Object(n.useState)([]),H=V[0],W=V[1],q=Object(n.useState)(""),J=q[0],Q=q[1],U=Object(n.useState)(!1),X=U[0],Z=U[1],$=Object(n.useState)([]),G=$[0],K=$[1],Y=Object(n.useState)("currentWindow"),ee=Y[0],te=Y[1],ae=Object(v.useLayerList)([]),ne=ae[0],re=ae[1],le=Object(n.useMemo)((function(){var e=a.find((function(e){return e.id==t}));return e||null}),[t,a]),ie=Object(n.useMemo)((function(){if(le){var e=le.dataInfo.paramsValue,t=(void 0===e?{}:e).drillDownOption;if(t)return t}return null}),[t]),oe=Object(n.useMemo)((function(){return i.map((function(e){return{name:e.name,value:""+e.page_id}}))}),[i]),ce=Object(n.useMemo)((function(){return ne.filter((function(e){return e.id!==t})).map((function(e){var t=e._title_,a=e.id,n=e.title,r=(n=void 0===n?{text:""}:n).text;return{name:(void 0===r?"":r)||t,value:""+a}}))}),[ne,t]);return Object(n.useEffect)((function(){if(le){var e,t=le.dataInfo,a=t.dimensions,n=t.measures;switch(M){case"dimension":e=a.map((function(e){var t=e.id,a=void 0===t?"":t,n=e.name;return{id:a,name:void 0===n?"":n}}));break;case"measure":e=n.map((function(e){var t=e.id,a=void 0===t?"":t,n=e.name;return{id:a,name:void 0===n?"":n}}))}W(e||[])}}),[M,le]),Object(n.useEffect)((function(){var e,t;if(M&&ne.length>0&&("chart"===I?P:A)){var a=ne.find((function(e){return e.id===P})),n=new Set,r=[];if("chart"===I){if(a){var l=a.dataInfo.dataInfo,i=l.dimensions,o=void 0===i?[]:i,c=l.measures,d=void 0===c?[]:c;switch(M){case"dimension":r=o.map((function(e){var t=e.id,a=void 0===t?"":t,n=e.name;return{id:a,name:void 0===n?"":n}}));break;case"measure":r=d.map((function(e){var t=e.id,a=void 0===t?"":t,n=e.name;return{id:a,name:void 0===n?"":n}}))}}}else for(var u,s=C(ne);!(u=s()).done;){var m=u.value.dataInfo.dataInfo,f=m.dimensions,v=void 0===f?[]:f,p=m.measures,b=void 0===p?[]:p;switch(M){case"dimension":var g=v.map((function(e){var t=e.id,a=void 0===t?"":t,n=e.name;return{id:a,name:void 0===n?"":n}}));(e=r).push.apply(e,g);break;case"measure":var h=b.map((function(e){var t=e.id,a=void 0===t?"":t,n=e.name;return{id:a,name:void 0===n?"":n}}));(t=r).push.apply(t,h)}}for(var y,w=function(){var e=y.value,t=e.id,a=e.name;r.some((function(e){return e.id===t}))&&n.add(a)},E=C(H);!(y=E()).done;)w();K(Array.from(n))}}),[ne,I,P,M,H,A]),Object(n.useEffect)((function(){if(("chart"===I?E&&I&&A&&P&&M&&J&&ee:E&&I&&A&&M&&J&&ee)&&le){var e={drillDownPath:E,drillDownTarget:I,drillDownPage:A,drillDownChart:P,operationSelectType:M,operationSelectItem:J,openType:ee,drillDownScreen:d.screen_id};if(!Object(j.isEqual)(e,ie)){var t=le.id,a=le.type,n=le.dataInfo,r=n.paramsValue,i=void 0===r?{}:r;l.actions.layersDataInfo.edit({layerId:t,layerDataInfo:{id:t,type:a,dataInfo:Object.assign({},n,{paramsValue:Object.assign({},i,{drillDownOption:e})})}}),l.actions.history.addHistory("save drillDown option")}}}),[E,I,A,P,M,J,ee]),Object(n.useEffect)((function(){if(ie){var e=ie.drillDownPath,t=ie.drillDownTarget,a=ie.drillDownPage,n=ie.drillDownChart,r=ie.operationSelectType,l=ie.operationSelectItem,i=ie.openType;S(e),L(t),x(a),re(d.screen_id,a),z(n),F(r),Q(l),te(i)}}),[t]),r.a.createElement("div",{className:_.a.drillDownContainer},r.a.createElement("div",{className:_.a.drillDownTitle},r.a.createElement("div",null,o.a.get("setting.drillDown"))," ",r.a.createElement(c.a,{arrow:!0,title:"对当前页面中的图表设置跳转，可钻取到其他报告页或其他页面的图表中。",placement:"bottom"},r.a.createElement(u.a,{fontSize:"small"}))),r.a.createElement(s.a,null),r.a.createElement("div",{className:_.a.drillDownSelect},r.a.createElement(f.RadioRow,{label:o.a.get("setting.drillDown.pathSelect"),options:[{name:o.a.get("setting.drillDown.pathSelect.currentReport"),value:"currentReport"},{name:o.a.get("setting.drillDown.pathSelect.otherReport"),value:"otherReport",disabled:!0}],initValue:E,onSelectChange:function(e){return S(e)}}),r.a.createElement(f.RadioRow,{label:o.a.get("setting.drillDown.targetSelect"),options:[{name:o.a.get("setting.drillDown.targetSelect.chart"),value:"chart"},{name:o.a.get("setting.drillDown.targetSelect.page"),value:"page"}],initValue:I,onSelectChange:function(e){return L(e)}})),r.a.createElement("div",{className:_.a.drillDownListSelect},r.a.createElement(m.a,{container:!0,spacing:3},r.a.createElement(m.a,{item:!0,xs:"page"===I?12:6},r.a.createElement(f.DisplayList,{title:o.a.get("setting.drillDown.targetSelect.page"),placement:"left",data:oe,initValue:A,onSelectChange:function(e){re(d.screen_id,e),x(e)}})),"chart"===I?r.a.createElement(m.a,{item:!0,xs:6},r.a.createElement(f.DisplayList,{title:o.a.get("setting.drillDown.targetSelect.chart"),placement:"right",data:ce,initValue:P,onSelectChange:function(e){return z(e)}})):r.a.createElement(r.a.Fragment,null))),r.a.createElement("div",{className:_.a.drillDownOperation},r.a.createElement("div",{className:_.a.label},o.a.get("setting.drillDown.operation"),r.a.createElement(c.a,{arrow:!0,title:"维度项钻取: 用户点击坐标轴上的文字进行钻取。 度量值钻取: 用户点击图表中对应的图形区域进行钻取。",placement:"bottom"},r.a.createElement(u.a,{fontSize:"small"}))),r.a.createElement(b.a,{variant:"outlined",className:p.formControl},r.a.createElement(g.a,{value:M,onChange:function(e){return F(e.target.value)},displayEmpty:!0,inputProps:{"aria-label":o.a.get("setting.drillDown.operation")}},r.a.createElement(h.a,{value:"dimension"},o.a.get("setting.drillDown.operation.dimension")),r.a.createElement(h.a,{value:"measure"},o.a.get("setting.drillDown.operation.measure")))),r.a.createElement(b.a,{variant:"outlined",className:p.formControl},r.a.createElement(g.a,{value:J,onChange:function(e){return Q(e.target.value)},displayEmpty:!0,inputProps:{"aria-label":"Without label"}},H.map((function(e){var t=e.id,a=void 0===t?"":t,n=e.name,l=void 0===n?"":n;return r.a.createElement(h.a,{key:a,value:a},l)}))))),r.a.createElement("div",{className:_.a.drillDownAutoRelate},r.a.createElement("div",{className:_.a.label},o.a.get("setting.drillDown.autoRelate"),r.a.createElement(c.a,{arrow:!0,title:"将当前表字段与目标表字段进行匹配，单击某个图表中的某个字段时，会跳转到与被单击部分相关联的图表或页面上。若当前图表和钻取目标所用的是同一个数据模型，则会自动关联字段。",placement:"bottom"},r.a.createElement(u.a,{fontSize:"small"})),X?r.a.createElement(w.a,{onClick:function(){return Z((function(e){return!e}))}}):r.a.createElement(D.a,{onClick:function(){return Z((function(e){return!e}))}})),X?r.a.createElement(r.a.Fragment,null):r.a.createElement("div",{className:_.a.drillDownAutoRelateContent},G.map((function(e){return r.a.createElement("div",{key:e,className:_.a.drillDownAutoRelateRow},r.a.createElement("div",null,r.a.createElement(O.a,{color:"primary"},e)),r.a.createElement("div",null,"  =  "),r.a.createElement("div",null,r.a.createElement(O.a,{color:"primary"},e)))})))),r.a.createElement("div",null,r.a.createElement(f.RadioRow,{label:o.a.get("setting.drillDown.open"),options:[{name:o.a.get("setting.drillDown.open.current"),value:"currentWindow"}],initValue:ee,onSelectChange:function(e){return te(e)}})))};t.default=Object(l.smart)((function(e){var t=e.editor.selectedLayer,a=e.layersAttr.layersAttr,n=e.layersDataInfo.layersDataInfo,r=e.screen;return{selectedLayer:t,layersAttr:a,layersDataInfo:n,pageList:r.pageList,BERoot:r.BERoot}}))(Object(n.memo)(I))},d622:function(e,t,a){"use strict";var n=a("4ea4"),r=a("dbce");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a("ab5b")),i=(0,n(a("f3f8")).default)(l.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.default=i},d807:function(e,t,a){e.exports={drillDownContainer:"style-module_drillDownContainer_1TJ1Q",drillDownSeparator:"style-module_drillDownSeparator_1iziZ",drillDownTitle:"style-module_drillDownTitle_33PkH",drillDownSelect:"style-module_drillDownSelect_2mAHQ",drillDownSelectLabel:"style-module_drillDownSelectLabel_3NLfy",drillDownListSelect:"style-module_drillDownListSelect_2aH08",label:"style-module_label_13srD",drillDownOperation:"style-module_drillDownOperation_2mTlB",drillDownAutoRelate:"style-module_drillDownAutoRelate_3vIX_",drillDownAutoRelateContent:"style-module_drillDownAutoRelateContent_Hv6n4",drillDownAutoRelateRow:"style-module_drillDownAutoRelateRow_-FqeB"}},e29a:function(e,t,a){"use strict";var n=a("c31d"),r=a("3835"),l=a("15fd"),i=a("ab5b"),o=(a("d7bc"),a("8ae8")),c=a("c82c"),d=a("1077"),u=a("1f64"),s=a("3ec0"),m=i.forwardRef((function(e,t){var a=e.autoFocus,u=e.checked,m=e.checkedIcon,f=e.classes,v=e.className,p=e.defaultChecked,b=e.disabled,g=e.icon,h=e.id,y=e.inputProps,w=e.inputRef,E=e.name,D=e.onBlur,O=e.onChange,S=e.onFocus,_=e.readOnly,j=e.required,C=e.tabIndex,R=e.type,k=e.value,I=Object(l.a)(e,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),L=Object(c.a)({controlled:u,default:Boolean(p),name:"SwitchBase",state:"checked"}),N=Object(r.a)(L,2),A=N[0],x=N[1],T=Object(d.a)(),P=b;T&&void 0===P&&(P=T.disabled);var z="checkbox"===R||"radio"===R;return i.createElement(s.a,Object(n.a)({component:"span",className:Object(o.a)(f.root,v,A&&f.checked,P&&f.disabled),disabled:P,tabIndex:null,role:void 0,onFocus:function(e){S&&S(e),T&&T.onFocus&&T.onFocus(e)},onBlur:function(e){D&&D(e),T&&T.onBlur&&T.onBlur(e)},ref:t},I),i.createElement("input",Object(n.a)({autoFocus:a,checked:u,defaultChecked:p,className:f.input,disabled:P,id:z&&h,name:E,onChange:function(e){var t=e.target.checked;x(t),O&&O(e,t)},readOnly:_,ref:w,required:j,tabIndex:C,type:R,value:k},y)),A?m:g)}));t.a=Object(u.a)({root:{padding:9},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}},{name:"PrivateSwitchBase"})(m)}}]);